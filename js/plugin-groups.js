!function(e){var t={};function n(c){if(t[c])return t[c].exports;var a=t[c]={i:c,l:!1,exports:{}};return e[c].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(c,a,function(t){return e[t]}.bind(null,a));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.React},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t)},function(e,t){e.exports=window.ReactDOM},function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),l=n(0),s=n(2),r=n.n(s),o=n(5),u=n.n(o),i=n(1);function d(e){const{navTab:t,tab:n,pluginName:c,version:a,handleSave:s,handleExport:r,handleImport:o,saving:u}=e;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("header",{className:"ui-header"},Object(l.createElement)("span",null,Object(l.createElement)("h2",null,c)),Object(l.createElement)("span",{className:"ui-header-version"},a),Object(l.createElement)("a",{className:"button button-primary",href:e.legacyURL},Object(i.__)("Return to v1.2.3 Legacy")),Object(l.createElement)("button",{className:"button button-primary",type:"button",onClick:s,disabled:u},Object(i.__)("Save Settings",e.slug)),Object(l.createElement)("button",{className:"button button-primary",type:"button",onClick:r},"Export"),Object(l.createElement)("label",{className:"button button-primary",type:"button",onClick:""},"Import",Object(l.createElement)("input",{className:"importer-input",type:"file",onChange:o}))),Object(l.createElement)("ul",{className:"ui-navigation"},Object(l.createElement)("li",{className:1===n?"ui-navigation-link active":"ui-navigation-link",onClick:()=>t(1)},Object(i.__)("Groups Management",e.slug)),Object(l.createElement)("li",{className:2===n?"ui-navigation-link active":"ui-navigation-link",onClick:()=>t(2)},Object(i.__)("Settings",e.slug))))}function p(e){const{name:t,id:n,changeName:c,editGroup:a,temp:s,focus:r}=e;return Object(l.createElement)("input",{className:"ui-body-edit-title",autoFocus:r,onFocus:e=>{e.target.select()},value:t,onInput:e=>{c(n,e.target.value)},onBlur:e=>{e.target.value.length?e.target.value.length&&"/"!==e.target.value&&a(n):e.target.focus()},type:"text","data-edit":n})}function m(e){const{title:t,collapse:n,height:c}=e,[a,s]=r.a.useState(n||"open"),o="open"===a?"dashicons-arrow-up-alt2":"dashicons-arrow-down-alt2",u=n?"collapsible":"";return Object(l.createElement)("div",{className:"ui-panel"},Object(l.createElement)("div",{className:"ui-panel-header "+u,onClick:()=>{n&&s("open"===a?"closed":"open")}},Object(l.createElement)("h3",{className:"ui-panel-header-title"},t),n&&Object(l.createElement)("span",{className:"dashicons "+o})),"open"===a&&Object(l.createElement)("div",{className:"ui-panel-body "+a},e.children))}function g(e){const{name:t,version:n,id:c,callback:a,checked:s,bold:r,subname:o,className:u}=e;return Object(l.createElement)("div",{className:"ui-body-sidebar-list-item "+u},Object(l.createElement)("label",null,Object(l.createElement)("input",{type:"checkbox",checked:s,value:c,onChange:a}),Object(l.createElement)("span",null,r?Object(l.createElement)("strong",null,t,n&&Object(l.createElement)(l.Fragment,null,": ",n)):Object(l.createElement)("span",null,t,n&&Object(l.createElement)(l.Fragment,null,": ",n)),o&&Object(l.createElement)("div",null,o))),e.children)}function b(e){const{group:t,plugins:n,removePlugins:c,removePlugin:a}=e,[s,o]=r.a.useState([]),u=0<t.plugins.length,d=e=>{const t=[...s];e.target.checked?t.push(e.target.value):t.splice(t.indexOf(e.target.value),1),o(t)};return Object(l.createElement)(m,{title:Object(i.__)("Grouped plugins",e.slug)},u&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)(g,{name:Object(i.__)("Select All",e.slug),className:"list-control",callback:e=>{e.target.checked?o(t.plugins):o([])},checked:s.length===t.plugins.length},Object(l.createElement)("button",{disabled:!s.length,type:"button",className:"button",onClick:e=>{c(t.id,[...s])}},Object(i.__)("Remove selected",e.slug))),Object(l.createElement)("div",{className:"ui-body-edit-plugins"},t.plugins.map((e,c)=>{const r=n[e];return Object(l.createElement)(g,{name:r.Name,version:r.Version,checked:-1<s.indexOf(e),id:e,callback:d},Object(l.createElement)("label",{className:"dashicons dashicons-no-alt",onClick:()=>a(t.id,e)}))}))),!u&&Object(l.createElement)("div",{className:"ui-body-edit-plugins"},Object(l.createElement)("span",{className:"ui-body-edit-plugins-item"},Object(i.__)("No plugins selected",e.slug))))}function O({group:e,removeKeyword:t}){const{id:n,keywords:c}=e;return c.map(e=>Object(l.createElement)("span",{className:"ui-keyword"},e,Object(l.createElement)("label",{className:"dashicons dashicons-no-alt",onClick:()=>t(n,e)})))}function j(e){const{group:t,addKeyword:n,removeKeyword:c}=e;return Object(l.createElement)("div",{className:"ui-body-sidebar-list-item-section"},Object(l.createElement)(m,{title:Object(i.__)("Keywords",e.slug)},Object(l.createElement)(O,{group:t,removeKeyword:c,addKeyword:n}),Object(l.createElement)("hr",null),Object(l.createElement)("input",{className:"regular-text",type:"text",placeholder:Object(i.__)("Add keyword"),"data-keywords":!0,onKeyDown:e=>{const c=e.target.value.trim();"Enter"!==e.key&&","!==e.key||(e.preventDefault(),e.stopPropagation(),e.target.dataset.keywords&&0<c.length&&(n(t.id,c),e.target.value=""))}})))}function h(e){const{group:t}=e;return Object(l.createElement)("div",{className:"ui-body-sidebar-list-item-edit"},Object(l.createElement)(b,e),Object(l.createElement)(j,e))}function E(e){const{selectGroup:t,openGroup:n,group:c,changeName:s,editGroup:r,index:o}=e,{temp:u,name:i,id:d,plugins:m,selected:g,open:b,edit:O,focus:j}=c,E=g?"active":"";return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:"ui-body-sidebar-list-item "+E},!O&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)("span",null,Object(l.createElement)("input",{type:"checkbox",checked:g,onClick:e=>t(d)}),Object(l.createElement)("span",{className:"ui-body-sidebar-list-item-title",onClick:e=>n(d)},i)),Object(l.createElement)("span",{className:"ui-body-sidebar-list-item-icons"},Object(l.createElement)("span",{className:"dashicons dashicons-edit",onClick:()=>r(d)}),m.length)),O&&Object(l.createElement)(p,{temp:u,name:i,id:d,changeName:s,editGroup:r,focus:j})),!u&&b&&Object(l.createElement)(h,a()({group:c},e)))}function f(e){const{groups:t,getList:n,edit:c}=e;return n().map((n,s)=>{const r=t[n];return Object(l.createElement)(E,a()({index:s,group:r,editing:n===c},e))})}function v(e){const{getList:t,createGroup:n,deleteGroups:c,selectGroups:a,getSelected:s}=e,r=s().length===Object.keys(e.groups).length;return Object(l.createElement)("div",{className:"ui-body-sidebar wide"},Object(l.createElement)(m,{title:Object(i.__)("Groups")},Object(l.createElement)("div",{className:"ui-body-sidebar-list"},0!==t().length&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)(g,{name:Object(i.__)("Select All"),bold:!0,callback:t=>{a(Object.keys(e.groups),t.target.checked)},checked:r,className:"list-control"},Object(l.createElement)("button",{disabled:!s().length,type:"button",className:"button",onClick:()=>{c(s(),!0)}},Object(i.__)("Delete selected",e.slug))),Object(l.createElement)(f,e)),0===t().length&&Object(l.createElement)("div",{className:"description"},Object(l.createElement)("span",{className:"ui-body-edit-plugins-item"},Object(i.__)("No groups created",e.slug))))),Object(l.createElement)("button",{type:"button",className:"button",onClick:()=>n("",!0)},Object(l.createElement)("span",{className:"dashicons dashicons-plus-alt"}),Object(i.__)("Create new group",e.slug)))}function y(e){const{plugins:t,addPlugins:n}=e,[c,a]=r.a.useState({checkedAll:!1,search:"",checked:[]}),s=Object.keys(t),o=e=>{a({...c,...e})},u=e=>{const n={checked:[]};e&&s.forEach(e=>{const c=t[e];p(c.Name)&&n.checked.push(e)}),n.checkedAll=n.checked.length,o(n)},d=e=>{const t={...c},n=t.checked.indexOf(e.target.value);e.target.checked&&-1===n?t.checked.push(e.target.value):!e.target.checked&&-1<n&&t.checked.splice(n,1),t.checked.length!==t.checkedAll&&(t.checkedAll=0),t.checked.length===s.length?u(!0):o(t)},p=e=>!c.search||-1<e.toLowerCase().indexOf(c.search.toLowerCase()),b=c.checked.length&&(()=>{for(const t in e.groups)if(e.groups[t].selected)return!0;return!1})();return Object(l.createElement)("div",{className:"ui-body-sidebar"},Object(l.createElement)(m,{title:Object(i.__)("Plugins",e.slug)},Object(l.createElement)("input",{className:"regular-text search",placeholder:Object(i.__)("Search",e.slug),type:"search",onInput:e=>{o({search:e.target.value})},value:c.search}),Object(l.createElement)(g,{name:Object(i.__)("Select all",e.slug),id:"all",callback:e=>u(e.target.checked),checked:c.checkedAll,bold:!0,className:"list-control"},Object(l.createElement)("button",{className:"button",type:"button",onClick:()=>{Object.keys(e.groups).forEach(t=>{e.groups[t].selected&&n(t,c.checked)}),u(!1)},disabled:!b},Object(i.__)("Send to Selected Groups"),Object(l.createElement)("span",{className:"dashicons dashicons-arrow-right-alt2"}))),Object(l.createElement)("div",{className:"plugins-list"},Object(l.createElement)("div",{className:"ui-body-sidebar-list"},s.map((e,n)=>{const a=t[e],s=p(a.Name),r=-1<c.checked.indexOf(e)&&p(a.Name);return Object(l.createElement)(l.Fragment,null,s&&Object(l.createElement)(g,{name:a.Name,id:e,version:a.Version,checked:r,callback:d}))})))))}function k(e){const{togglePreset:t,selectedPresets:n,presets:c,slug:a}=e;return Object(l.createElement)("div",{className:"ui-body-sidebar narrow"},Object(l.createElement)(m,{title:Object(i.__)("Presets",a)},c.map(e=>Object(l.createElement)(g,{name:e,id:e,checked:-1<n.indexOf(e),callback:()=>t(e)}))))}function N(e){const{presets:t,getList:n}=e;return Object(l.createElement)("div",null,Object(l.createElement)("select",null,t.map((e,t)=>{if(!(5<t))return Object(l.createElement)("option",null,e," (",t+1,")")})))}function w(e){const{presets:t,className:n,setParam:c,params:a,styleName:s}=e,r=a.navStyle&&n===a.navStyle?" selected":"";return Object(l.createElement)("div",{className:"plugin-groups nav-settings"+r,onClick:()=>{c("navStyle",n)}},Object(l.createElement)("label",null,s),"groups-dropdown"===n&&Object(l.createElement)(N,e),"groups-dropdown"!==n&&Object(l.createElement)("ul",{className:n},t.map((e,t)=>{if(!(5<t))return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("li",null,Object(l.createElement)("a",{className:0===t?"current":""},e,Object(l.createElement)("span",{className:"count"}," (",t+1,")"))))})))}function _(e){const{params:t,setParam:n}=e;return Object(l.createElement)("div",{className:"ui-body"},Object(l.createElement)("div",{className:"ui-body-sidebar"},Object(l.createElement)(m,{title:"Settings"},Object(l.createElement)(g,{name:Object(i.__)("Use Legacy status based grouping",e.slug),checked:t.legacyGrouping,callback:e=>n("legacyGrouping",e.target.checked)}),Object(l.createElement)(g,{name:Object(i.__)("Enable admin menu",e.slug),checked:t.menuGroups,callback:e=>n("menuGroups",e.target.checked)}))),!t.legacyGrouping&&Object(l.createElement)("div",{className:"ui-body-sidebar full"},Object(l.createElement)(m,{title:Object(i.__)("Navigation style",e.slug)},Object(l.createElement)(w,a()({styleName:Object(i.__)("Legacy",e.slug),className:"subsubsub"},e)),Object(l.createElement)(w,a()({styleName:Object(i.__)("Modern",e.slug),className:"groups-modern"},e)),Object(l.createElement)(w,a()({styleName:Object(i.__)("Dropdown",e.slug),className:"groups-dropdown"},e)))))}function x(e){const[t,n]=r.a.useState(e),[c,s]=r.a.useState(1),o=e=>{window.localStorage.setItem("_plgUnsaved",!0),n(e)},u=()=>({...t}),p=e=>{o({...t,...e})},m=e=>{g([e])},g=(e,t)=>{const n=u();e.forEach(e=>{if(null===e)return;const c=void 0!==t?!t:n.groups[e].selected;n.groups[e].selected=!c,c&&(delete n.groups[e].open,delete n.groups[e].edit,delete n.groups[e].focus),n.activeGroup=e}),o(n)},b=(e,t)=>{const n=u();e.forEach(e=>{n.groups[e].open=t}),p(n)},O=(e,t,n)=>{const c=u();n||c.groups[e].prevName?n&&(t=c.groups[e].prevName?c.groups[e].prevName:c.groups[e].name,delete c.groups[e].prevName,delete c.groups[e].edit,delete c.groups[e].selected,delete c.groups[e].open):c.groups[e].prevName=c.groups[e].name,c.groups[e].name=t,o(c)},j=(e,n)=>{const c=u();n&&!confirm(Object(i._n)("Delete the selected group?","Delete the selected groups",e.length,t.slug))||(e.forEach(e=>{delete c.groups[e]}),o(c))},h=e=>{j([e])},E=e=>{const t="pgxxxxx".replace(/x/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),n={id:t,name:e,plugins:[],keywords:[],temp:!0,selected:!0,edit:!0,focus:!0},c=u();c.groups||(c.groups={}),c.groups[t]=n,o(c)},f=(e,n)=>{const c=u();n.map(n=>{const a=t.groups[e].plugins.indexOf(n);-1<a&&c.groups[e].plugins.splice(a,1)}),o(c)},N=()=>{const e=u(),{groups:n,selectedPresets:c,params:a}=e,l=JSON.stringify({groups:n,selectedPresets:c,params:a});e.saving=!0,fetch(t.saveURL,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t.restNonce},body:l}).then(e=>e.json()).then(n=>{e.saving=!1,o(t),window.localStorage.removeItem("_plgUnsaved")}),o(e)},w=e=>{const n=u();let c=!1;e.forEach(e=>{n.groups[e].edit&&(e=>0<t.groups[e].name.replace(/ /g,"").length)(e)?(delete n.groups[e].edit,n.groups[e].open||delete n.groups[e].selected,delete n.groups[e].focus,delete n.groups[e].temp,delete n.groups[e].prevName):(n.groups[e].edit=!0,c||(n.groups[e].focus=!0,c=!0))}),o(n),S()},x=e=>{w([e])},S=()=>{const e=D();if(e.length){const t=document.querySelector("[data-edit="+e.shift()+"]");t&&t.focus()}},P=(e,t)=>{const n=F(),c=n.indexOf(e),a="n"===t?c+1:c-1;let l=null;return n[a]&&(l=n[a]),l!==e?l:null},G=e=>{const n=[];return Object.keys(t.groups).forEach(c=>{t.groups[c][e]&&n.push(c)}),n},C=()=>G("selected"),D=()=>G("edit"),L=e=>{if("ArrowRight"===e.key)b(C(),!0);else if("ArrowLeft"===e.key)b(C(),!1);else if("ArrowUp"===e.key)e.preventDefault(),e.shiftKey||g(F(),!1),m(P(t.activeGroup,"p"));else if("ArrowDown"===e.key)e.preventDefault(),e.shiftKey||g(F(),!1),m(P(t.activeGroup,"n"));else if("Enter"===e.key&&e.target.dataset.edit)x(e.target.dataset.edit);else if("Enter"===e.key)e.stopPropagation(),e.preventDefault(),w(C());else if("/"===e.key)e.preventDefault(),e.stopPropagation(),E("");else if("Escape"===e.key){const n=e.path[0].dataset.edit;t.groups[n]&&((e=>!!t.groups[e].temp)(n)?h(n):(O(n,"",!0),S()))}else if("Delete"===e.key){const e=C();e.length&&j(e,!0)}else"s"===e.key&&e.metaKey&&(e.preventDefault(),N())},F=()=>t.groups?Object.keys(t.groups):[];r.a.useEffect(()=>(window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}));const A={selectGroup:m,createGroup:E,deleteGroup:h,deleteGroups:j,changeName:O,handleSave:N,editGroup:x,getList:F,addPlugins:(e,n)=>{if(t.groups[e]){const c=u();n.forEach(n=>{-1===t.groups[e].plugins.indexOf(n)&&c.groups[e].plugins.push(n)}),o(c)}},addKeyword:(e,t)=>{const n=u();n.groups[e].keywords.push(t),o(n)},removeKeyword:(e,t)=>{const n=u(),c=n.groups[e].keywords.indexOf(t);n.groups[e].keywords.splice(c,1),o(n)},removePlugin:(e,t)=>{f(e,[t])},openGroup:e=>{if(t.groups[e]){const t=u();t.groups[e].open=!t.groups[e].open,t.groups[e].selected=!0,t.activeGroup=e,p(t)}},selectGroups:g,getSelected:C,handleExport:()=>{const e=JSON.stringify(new Date).replace(/"/g,"-").replace(/:/g,"-").split(".")[0],n=new Blob([JSON.stringify(t.groups)],{type:"application/json"}),c=URL.createObjectURL(n),a=document.createElement("a");a.href=c,a.download="plugin-groups-export"+e+".json",a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},handleImport:e=>{const t=new FileReader;t.addEventListener("loadend",e=>{let t=JSON.parse(e.target.result);if(t){t["plugin-groups-setup"]&&(t=(e=>{const t={};return Object.keys(e.group).map(n=>{const c=e.group[n];t[n]={id:n,name:c.config.group_name,plugins:c.config.plugins?c.config.plugins:[],keywords:c.config.keywords.length?c.config.keywords.split(" "):[]}}),console.log(e),t})(t));const e=u();e.groups=t,o(e)}}),t.readAsText(e.target.files[0])},togglePreset:e=>{const t=u();t.selectedPresets||(t.selectedPresets=[]);const n=t.selectedPresets.indexOf(e);-1===n?t.selectedPresets.push(e):t.selectedPresets.splice(n,1),o(t)},removePlugins:f,navTab:e=>{s(e)},tab:c,setParam:(e,t)=>{const n=u();n.params[e]||(n.params[e]=null),n.params[e]=t,o(n)}};return Object(l.createElement)("div",{className:t.slug},1===c&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)(d,a()({},A,t)),Object(l.createElement)("div",{className:"ui-body"},Object(l.createElement)(y,a()({},t,A)),Object(l.createElement)(v,a()({},t,A)),Object(l.createElement)(k,a()({},t,A)))),2===c&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)(d,a()({},A,t)),Object(l.createElement)(_,a()({},A,t))))}var S={init(e){u.a.render(Object(l.createElement)(x,e),document.getElementById("plg-app"))}};n(4);const P={init(){window.localStorage.removeItem("_plgUnsaved"),plgData.groups||(plgData.groups={}),plgData.activeGroup=!1,S.init(plgData)}};window.addEventListener("load",()=>P.init()),window.onbeforeunload=function(e){if(window.localStorage.getItem("_plgUnsaved"))return!1}}]);