!function(e){var t={};function n(c){if(t[c])return t[c].exports;var r=t[c]={i:c,l:!1,exports:{}};return e[c].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(c,r,function(t){return e[t]}.bind(null,r));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.React},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.ReactDOM},function(e,t,n){"use strict";n.r(t);var c=n(3),r=n.n(c),a=n(0),o=n(2),s=n.n(o),l=n(4),u=n.n(l),i=n(1);function d(e){const{pluginName:t,version:n,handleSave:c,saving:r}=e;return Object(a.createElement)("header",{className:"ui-header"},Object(a.createElement)("span",null,Object(a.createElement)("h2",null,t)),Object(a.createElement)("span",{className:"ui-header-version"},n),Object(a.createElement)("button",{className:"button button-primary",type:"button",onClick:c},r?"Saving":"Save Settings"))}function p(e){const{name:t,id:n,changeName:c,editGroup:r,temp:o,focus:s}=e;return Object(a.createElement)("input",{className:"ui-body-edit-title",autoFocus:s,onFocus:e=>{e.target.select()},value:t,onInput:e=>{c(n,e.target.value)},onBlur:e=>{e.target.value.length?e.target.value.length&&"/"!==e.target.value&&r(n):e.target.focus()},type:"text","data-edit":n})}function g(e){const{title:t,collapse:n,height:c}=e,[r,o]=s.a.useState(n||"open"),l="open"===r?"dashicons-arrow-up-alt2":"dashicons-arrow-down-alt2",u=n?"collapsible":"";return Object(a.createElement)("div",{className:"ui-panel"},Object(a.createElement)("div",{className:"ui-panel-header "+u,onClick:()=>{n&&o("open"===r?"closed":"open")}},Object(a.createElement)("h3",{className:"ui-panel-header-title"},t),n&&Object(a.createElement)("span",{className:"dashicons "+l})),"open"===r&&Object(a.createElement)("div",{className:"ui-panel-body "+r},e.children))}function m(e){const{group:t,plugins:n,removePlugin:c}=e;return Object(a.createElement)("div",{className:"ui-body-edit-plugins"},Object(a.createElement)(g,{title:Object(i.__)("Grouped plugins",e.slug)},t.plugins.map((e,r)=>{const o=n[e];return Object(a.createElement)("span",{className:"ui-body-edit-plugins-item"},Object(a.createElement)("span",null,o.Name," : ",o.Version),Object(a.createElement)("label",{className:"dashicons dashicons-no-alt",onClick:()=>c(t.id,e)}))})))}function b({group:e,removeKeyword:t}){const{id:n,keywords:c}=e;return c.map(e=>Object(a.createElement)("span",{className:"ui-keyword"},e,Object(a.createElement)("label",{className:"dashicons dashicons-no-alt",onClick:()=>t(n,e)})))}function h(e){const{group:t,addKeyword:n,removeKeyword:c}=e;return Object(a.createElement)("div",{className:"ui-body-sidebar-list-item-keywords"},Object(a.createElement)("strong",null,"Keywords:"),Object(a.createElement)(b,{group:t,removeKeyword:c,addKeyword:n}),Object(a.createElement)("hr",null),Object(a.createElement)("input",{className:"regular-text",type:"text",placeholder:Object(i.__)("Add keyword"),"data-keywords":!0,onKeyDown:e=>{const c=e.target.value.trim();"Enter"!==e.key&&","!==e.key||(e.preventDefault(),e.target.dataset.keywords&&0<c.length&&(e.stopPropagation(),n(t.id,c),e.target.value=""))}}))}function O(e){const{group:t}=e;return Object(a.createElement)("div",{className:"ui-body-sidebar-list-item-edit"},Object(a.createElement)(m,e),Object(a.createElement)(h,e))}function f(e){const{selectGroup:t,openGroup:n,group:c,changeName:o,editGroup:s,index:l}=e,{temp:u,name:i,id:d,plugins:g,selected:m,open:b,edit:h,focus:f}=c;return Object(a.createElement)("li",{className:m?"active":"",id:l},Object(a.createElement)("div",{className:"ui-body-sidebar-list-item"},Object(a.createElement)(a.Fragment,null,!h&&Object(a.createElement)("span",null,Object(a.createElement)("input",{type:"checkbox",checked:m,onClick:e=>t(d)}),Object(a.createElement)("span",{className:"ui-body-sidebar-list-item-title",onClick:e=>n(d)},i)),h&&Object(a.createElement)(p,{temp:u,name:i,id:d,changeName:o,editGroup:s,focus:f}),Object(a.createElement)("span",{className:"ui-body-sidebar-list-item-icons"},g.length))),!u&&b&&Object(a.createElement)(O,r()({group:c},e)))}function j(e){const{groups:t,getList:n,edit:c}=e;return n().map((n,o)=>{const s=t[n];return Object(a.createElement)(f,r()({index:o,group:s,editing:n===c},e))})}function y(e){const{name:t,version:n,id:c,callback:r,checked:o,bold:s}=e;return Object(a.createElement)("div",{className:"ui-body-sidebar-plugins-item"},Object(a.createElement)("label",null,Object(a.createElement)("input",{type:"checkbox",checked:o,value:c,onChange:r}),s?Object(a.createElement)("strong",null,t,n&&Object(a.createElement)(a.Fragment,null,": ",n)):Object(a.createElement)(a.Fragment,null,t,n&&Object(a.createElement)(a.Fragment,null,": ",n))),e.children)}function E(e){const{getList:t,createGroup:n,deleteGroups:c,selectGroups:r,getSelected:o}=e,s=o().length===Object.keys(e.groups).length;return Object(a.createElement)("div",{className:"ui-body-sidebar wide"},Object(a.createElement)(g,{title:Object(i.__)("Groups")},Object(a.createElement)("ul",{className:"ui-body-sidebar-list"},0!==t().length&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)(y,{name:Object(i.__)("Select All"),bold:!0,callback:t=>{r(Object.keys(e.groups),t.target.checked)},checked:s},Object(a.createElement)("button",{disabled:!o().length,type:"button",className:"button",onClick:()=>{c(o(),!0)}},Object(i.__)("Delete selected",e.slug))),Object(a.createElement)(j,e)),0===t().length&&Object(a.createElement)("div",{className:"description"},Object(i.__)("No groups")))),Object(a.createElement)("button",{type:"button",className:"button",onClick:()=>n("",!0)},Object(a.createElement)("span",{className:"dashicons dashicons-plus-alt"}),Object(i.__)("New Group")))}function v(e){const{plugins:t,addPlugins:n}=e,[c,r]=s.a.useState({checkedAll:!1,search:"",checked:[]}),o=Object.keys(t),l=e=>{r({...c,...e})},u=e=>{const n={checked:[]};e&&o.forEach(e=>{const c=t[e];p(c.Name)&&n.checked.push(e)}),n.checkedAll=n.checked.length,l(n)},d=e=>{const t={...c},n=t.checked.indexOf(e.target.value);e.target.checked&&-1===n?t.checked.push(e.target.value):!e.target.checked&&-1<n&&t.checked.splice(n,1),t.checked.length!==t.checkedAll&&(t.checkedAll=0),t.checked.length===o.length?u(!0):l(t)},p=e=>!c.search||-1<e.toLowerCase().indexOf(c.search.toLowerCase()),m=c.checked.length&&(()=>{for(const t in e.groups)if(e.groups[t].selected)return!0;return!1})();return Object(a.createElement)("div",{className:"ui-body-sidebar"},Object(a.createElement)(g,{title:Object(i.__)("Plugins",e.slug)},Object(a.createElement)("input",{className:"regular-text search",placeholder:Object(i.__)("Search",e.slug),type:"search",onInput:e=>{l({search:e.target.value})},value:c.search}),Object(a.createElement)(y,{name:Object(i.__)("Select all",e.slug),id:"all",callback:e=>u(e.target.checked),checked:c.checkedAll,bold:!0},Object(a.createElement)("button",{className:"button",type:"button",onClick:()=>{Object.keys(e.groups).forEach(t=>{e.groups[t].selected&&n(t,c.checked)}),u(!1)},disabled:!m},Object(i.__)("Send to Selected Groups"),Object(a.createElement)("span",{className:"dashicons dashicons-arrow-right-alt2"}))),Object(a.createElement)("div",{className:"ui-body-sidebar-plugins"},o.map((e,n)=>{const r=t[e],o=p(r.Name),s=-1<c.checked.indexOf(e)&&p(r.Name);return Object(a.createElement)(a.Fragment,null,o&&Object(a.createElement)(y,{name:r.Name,id:e,version:r.Version,checked:s,callback:d}))}))))}function k(e){const[t,n]=s.a.useState(e),c=()=>({...t}),o=e=>{n({...t,...e})},l=e=>{u([e])},u=(e,t)=>{const r=c();e.forEach(e=>{const n=t?!t:r.groups[e].selected;r.groups[e].selected=!n,n&&(delete r.groups[e].open,delete r.groups[e].edit,delete r.groups[e].focus),r.activeGroup=e}),n(r)},p=(e,t)=>{const n=c();e.forEach(e=>{n.groups[e].open=t}),o(n)},g=(e,t,r)=>{const a=c();r||a.groups[e].prevName?r&&(t=a.groups[e].prevName?a.groups[e].prevName:a.groups[e].name,delete a.groups[e].prevName,delete a.groups[e].edit,delete a.groups[e].selected,delete a.groups[e].open):a.groups[e].prevName=a.groups[e].name,a.groups[e].name=t,n(a)},m=(e,t)=>{const r=c();t&&!confirm(Object(i.__)(" Are you sure you want to delete all selected groups?"))||(e.forEach(e=>{delete r.groups[e]}),n(r))},b=e=>{m([e])},h=e=>{const t=(()=>{const e=[];for(let t=0;t<6;t++)e[t]=Math.floor(16*Math.random());return"nd"+e.join("")})(),r={id:t,name:e,plugins:[],keywords:[],temp:!0,selected:!0,edit:!0,focus:!0},a=c();a.groups||(a.groups={}),a.groups[t]=r,n(a)},O=()=>{const e=c(),r=JSON.stringify(e.groups);e.saving=!0,fetch(t.saveURL,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t.restNonce},body:r}).then(e=>e.json()).then(c=>{e.saving=!1,n(t)}),n(e)},f=e=>{const r=c();let a=!1;e.forEach(e=>{r.groups[e].edit&&(e=>0<t.groups[e].name.replace(/ /g,"").length)(e)?(delete r.groups[e].edit,delete r.groups[e].selected,delete r.groups[e].open,delete r.groups[e].focus,delete r.groups[e].temp,delete r.groups[e].prevName):(r.groups[e].edit=!0,a||(r.groups[e].focus=!0,a=!0))}),n(r),y()},j=e=>{f([e])},y=()=>{const e=_();e.length&&document.querySelector("[data-edit="+e.shift()+"]").focus()},k=(e,t)=>{const n=G(),c=n.indexOf(e),r="n"===t?c+1:c-1;let a=null;return n[r]&&(a=n[r]),a!==e?a:null},N=e=>{const n=[];return Object.keys(t.groups).forEach(c=>{t.groups[c][e]&&n.push(c)}),n},w=()=>N("selected"),_=()=>N("edit"),x=e=>{if("ArrowRight"===e.key)p(w(),!0);else if("ArrowLeft"===e.key)p(w(),!1);else if("ArrowUp"===e.key)l(k(t.activeGroup,"p"));else if("ArrowDown"===e.key)l(k(t.activeGroup,"n"));else if("Enter"===e.key&&e.target.dataset.edit)j(e.target.dataset.edit);else if("Enter"===e.key)e.stopPropagation(),e.preventDefault(),f(w());else if("/"===e.key)e.preventDefault(),e.stopPropagation(),h("");else if("Escape"===e.key){const n=e.path[0].dataset.edit;t.groups[n]&&((e=>!!t.groups[e].temp)(n)?b(n):(g(n,"",!0),y()))}else if("Delete"===e.key){const e=w();e.length&&m(e,!0)}else"s"===e.key&&e.metaKey&&(e.preventDefault(),O())},G=()=>t.groups?Object.keys(t.groups):[];s.a.useEffect(()=>(window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)}));const S={selectGroup:l,createGroup:h,deleteGroup:b,deleteGroups:m,changeName:g,handleSave:O,editGroup:j,getList:G,addPlugins:(e,r)=>{if(t.groups[e]){const a=c();r.forEach(n=>{-1===t.groups[e].plugins.indexOf(n)&&a.groups[e].plugins.push(n)}),n(a)}},addKeyword:(e,t)=>{const r=c();r.groups[e].keywords.push(t),n(r)},removeKeyword:(e,t)=>{const r=c(),a=r.groups[e].keywords.indexOf(t);r.groups[e].keywords.splice(a,1),n(r)},removePlugin:(e,r)=>{const a=c(),o=t.groups[e].plugins.indexOf(r);-1<o&&a.groups[e].plugins.splice(o,1),n(a)},openGroup:e=>{if(t.groups[e]){const t=c();t.groups[e].open=!t.groups[e].open,t.groups[e].selected=!0,t.activeGroup=e,o(t)}},selectGroups:u,getSelected:w};return Object(a.createElement)("div",{className:t.slug},Object(a.createElement)(d,r()({handleSave:O},t)),Object(a.createElement)("div",{className:"ui-body"},Object(a.createElement)(v,r()({},t,S)),Object(a.createElement)(E,r()({},t,S))))}var N={init(e){u.a.render(Object(a.createElement)(k,e),document.getElementById("plg-app"))}};const w={init(){plgData.groups||(plgData.groups={}),plgData.activeGroup=!1,N.init(plgData)}};window.addEventListener("load",()=>w.init())}]);